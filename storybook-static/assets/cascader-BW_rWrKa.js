import{j as s}from"./jsx-runtime-CDt2p4po.js";import{r as n}from"./index-GiUgBvb1.js";import{c as y,a as N}from"./utils-z-I-gj-J.js";import{r as D}from"./index-CROobee-.js";import{c as S}from"./createLucideIcon-Do1tV511.js";/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=S("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.378.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=S("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),L=N("fixed z-50 rounded-md border bg-popover text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",{variants:{},defaultVariants:{}}),_=N("inline-block align-top border-r border-border last:border-r-0 max-h-[200px] overflow-y-auto py-1 min-w-0 w-[160px] flex-shrink-0"),M=({className:O,open:o,onOpenChange:l,triggerRef:r,children:V,visibleLevels:w,...k})=>{const[v,R]=n.useState({}),d=n.useCallback(()=>{if(!r.current)return;const u=r.current.getBoundingClientRect(),m=window.innerWidth,p=window.innerHeight,f=w.length*160,b=200,x=4;let g=u.left;g+f>m-16&&(g=Math.max(16,m-f-16));const h=p-u.bottom-x-16,T=u.top-x-16;let j,C,q="";h>=b||h>=T?(j=u.bottom+x,C=Math.min(b,h)):(j=u.top-x,C=Math.min(b,T),q="translateY(-100%)"),R({left:`${g}px`,top:`${j}px`,width:`${f}px`,maxHeight:`${C}px`,transform:q})},[w.length,r]);return n.useEffect(()=>{if(o){const u=setTimeout(()=>{d()},0),m=()=>d(),p=()=>d();return window.addEventListener("resize",m),window.addEventListener("scroll",p,!0),()=>{clearTimeout(u),window.removeEventListener("resize",m),window.removeEventListener("scroll",p,!0)}}},[o,d]),n.useEffect(()=>{o&&d()},[o,w.length,d]),o?s.jsxs(s.Fragment,{children:[D.createPortal(s.jsx("div",{className:y(L(),O),style:v,"data-state":"open",...k,children:s.jsx("div",{className:"flex overflow-hidden",children:V})}),document.body),s.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>l(!1)})]}):null};M.displayName="CascaderDropdown";const A=n.forwardRef(({className:O,children:o,...l},r)=>s.jsx("div",{ref:r,className:y(_(),O),...l,children:o}));A.displayName="CascaderColumn";M.__docgenInfo={description:"",methods:[],displayName:"CascaderDropdown",props:{open:{required:!0,tsType:{name:"boolean"},description:""},onOpenChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(open: boolean) => void",signature:{arguments:[{type:{name:"boolean"},name:"open"}],return:{name:"void"}}},description:""},triggerRef:{required:!0,tsType:{name:"ReactRefObject",raw:"React.RefObject<HTMLElement>",elements:[{name:"HTMLElement"}]},description:""},children:{required:!0,tsType:{name:"ReactReactNode",raw:"React.ReactNode"},description:""},visibleLevels:{required:!0,tsType:{name:"Array",elements:[{name:"number"}],raw:"number[]"},description:""}}};A.__docgenInfo={description:"",methods:[],displayName:"CascaderColumn"};const I=N("relative inline-block",{variants:{width:{auto:"w-auto",fill:"w-full"}},defaultVariants:{width:"auto"}}),W=N("flex items-center justify-between gap-2 whitespace-nowrap transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 disabled:bg-muted border border-input bg-transparent hover:bg-accent hover:text-accent-foreground disabled:hover:bg-transparent h-9 rounded-md text-sm data-[placeholder]:text-muted-foreground [&>span]:line-clamp-1 px-3 cursor-pointer",{variants:{width:{auto:"w-auto min-w-[180px]",fill:"w-full"}},defaultVariants:{width:"auto"}}),$=N("relative flex cursor-pointer select-none items-center px-3 py-2 text-sm outline-none transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground",{variants:{selected:{true:"bg-accent text-accent-foreground",false:""},hasChildren:{true:"pr-8",false:""}},defaultVariants:{selected:!1,hasChildren:!1}}),z=({className:O,options:o=[],value:l=[],onChange:r,placeholder:V="请选择",disabled:w=!1,width:k="auto",maxLevel:v=3,allowClear:R=!0,changeOnSelect:d=!1,...u})=>{const[m,p]=n.useState(!1),[f,b]=n.useState([]),x=n.useRef(null);n.useEffect(()=>{b(l)},[l]);const g=n.useCallback(a=>{if(a===0)return o;let e=o;for(let t=0;t<a;t++){const c=f[t];if(!c)return[];const i=e.find(E=>E.value===c);if(!i||!i.children)return[];e=i.children}return e},[o,f]),h=n.useCallback(a=>{const e=[];let t=o;for(const c of a){const i=t.find(E=>E.value===c);if(!i||(e.push(i),!i.children))break;t=i.children}return e},[o]),T=n.useCallback((a,e)=>{if(e.disabled)return;const t=[...f.slice(0,a),e.value];if(b(t),d){const c=h(t);r==null||r(t,c),(a>=v-1||!e.children||e.children.length===0)&&p(!1)}else if(a>=v-1||!e.children||e.children.length===0){const c=h(t);r==null||r(t,c),p(!1)}},[f,v,r,h,d]),j=n.useMemo(()=>l.length===0?V:h(l).map(e=>e.label).join(" / "),[l,V,h]),C=n.useMemo(()=>{const a=[];for(let e=0;e<v;e++)if(g(e).length>0)a.push(e);else if(e>0)break;return a},[v,g]),q=n.useCallback(a=>{a.stopPropagation(),b([]),r==null||r([],[])},[r]);return s.jsxs("div",{ref:x,className:y(I({width:k}),O),...u,children:[s.jsxs("div",{className:y(W({width:k}),w&&"cursor-not-allowed opacity-50 bg-muted"),onClick:()=>!w&&p(!m),children:[s.jsx("span",{className:y("flex-1 truncate text-left",l.length===0&&"text-muted-foreground"),children:j}),s.jsxs("div",{className:"flex items-center gap-1",children:[R&&l.length>0&&!w&&s.jsx("button",{type:"button",onClick:q,className:"flex h-4 w-4 items-center justify-center rounded-sm hover:bg-accent",children:s.jsx("svg",{className:"h-3 w-3",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:s.jsx("path",{d:"M18 6L6 18M6 6l12 12"})})}),s.jsx(H,{className:y("h-4 w-4 transition-transform duration-200",m&&"rotate-180",l.length===0&&"text-muted-foreground")})]})]}),s.jsx(M,{open:m,onOpenChange:p,triggerRef:x,visibleLevels:C,children:C.map(a=>{const e=g(a);return s.jsx(A,{children:e.map(t=>{const c=f[a]===t.value,i=t.children&&t.children.length>0;return s.jsxs("div",{className:y($({selected:c,hasChildren:i}),t.disabled&&"cursor-not-allowed opacity-50"),onClick:()=>T(a,t),children:[s.jsx("span",{className:"flex-1 truncate",children:t.label}),i&&s.jsx(P,{className:"absolute right-2 h-4 w-4"})]},t.value)})},a)})})]})};z.displayName="Cascader";z.__docgenInfo={description:"",methods:[],displayName:"Cascader",props:{options:{required:!1,tsType:{name:"Array",elements:[{name:"CascaderOption"}],raw:"CascaderOption[]"},description:"",defaultValue:{value:"[]",computed:!1}},value:{required:!1,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:"",defaultValue:{value:"[]",computed:!1}},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(value: CascaderValue, selectedOptions: CascaderOption[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"value"},{type:{name:"Array",elements:[{name:"CascaderOption"}],raw:"CascaderOption[]"},name:"selectedOptions"}],return:{name:"void"}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:"'请选择'",computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},width:{required:!1,tsType:{name:"union",raw:"'auto' | 'fill'",elements:[{name:"literal",value:"'auto'"},{name:"literal",value:"'fill'"}]},description:"",defaultValue:{value:"'auto'",computed:!1}},maxLevel:{required:!1,tsType:{name:"union",raw:"2 | 3",elements:[{name:"literal",value:"2"},{name:"literal",value:"3"}]},description:"",defaultValue:{value:"3",computed:!1}},allowClear:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},changeOnSelect:{required:!1,tsType:{name:"boolean"},description:"是否在选择任何级别时都触发变化，适用于直辖市等场景",defaultValue:{value:"false",computed:!1}}},composes:["Omit"]};export{z as C,H as a,P as b};
