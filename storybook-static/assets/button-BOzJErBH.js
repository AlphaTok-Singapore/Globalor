import{j as f}from"./jsx-runtime-CDt2p4po.js";import{r as a}from"./index-GiUgBvb1.js";import{u as L,a as U,c as ee,b as B,d as te,e as ne,R as oe,A as re,P as se,f as b,D as ae,C as ie,g as ce,h as le,i as ue,S as V}from"./index-DAEUSR7T.js";import{c as D,a as de}from"./utils-z-I-gj-J.js";function fe(e,n){return a.useReducer((t,o)=>n[t][o]??t,e)}var F=e=>{const{present:n,children:t}=e,o=pe(n),r=typeof t=="function"?t({present:o.isPresent}):a.Children.only(t),c=L(o.ref,me(r));return typeof t=="function"||o.isPresent?a.cloneElement(r,{ref:c}):null};F.displayName="Presence";function pe(e){const[n,t]=a.useState(),o=a.useRef(null),r=a.useRef(e),c=a.useRef("none"),l=e?"mounted":"unmounted",[m,s]=fe(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return a.useEffect(()=>{const i=R(o.current);c.current=m==="mounted"?i:"none"},[m]),U(()=>{const i=o.current,u=r.current;if(u!==e){const v=c.current,d=R(i);e?s("MOUNT"):d==="none"||(i==null?void 0:i.display)==="none"?s("UNMOUNT"):s(u&&v!==d?"ANIMATION_OUT":"UNMOUNT"),r.current=e}},[e,s]),U(()=>{if(n){let i;const u=n.ownerDocument.defaultView??window,p=d=>{const x=R(o.current).includes(d.animationName);if(d.target===n&&x&&(s("ANIMATION_END"),!r.current)){const g=n.style.animationFillMode;n.style.animationFillMode="forwards",i=u.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=g)})}},v=d=>{d.target===n&&(c.current=R(o.current))};return n.addEventListener("animationstart",v),n.addEventListener("animationcancel",p),n.addEventListener("animationend",p),()=>{u.clearTimeout(i),n.removeEventListener("animationstart",v),n.removeEventListener("animationcancel",p),n.removeEventListener("animationend",p)}}else s("ANIMATION_END")},[n,s]),{isPresent:["mounted","unmountSuspended"].includes(m),ref:a.useCallback(i=>{o.current=i?getComputedStyle(i):null,t(i)},[])}}function R(e){return(e==null?void 0:e.animationName)||"none"}function me(e){var o,r;let n=(o=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:o.get,t=n&&"isReactWarning"in n&&n.isReactWarning;return t?e.ref:(n=(r=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:r.get,t=n&&"isReactWarning"in n&&n.isReactWarning,t?e.props.ref:e.props.ref||e.ref)}var[A,Ve]=ee("Tooltip",[B]),O=B(),W="TooltipProvider",ve=700,M="tooltip.open",[he,I]=A(W),q=e=>{const{__scopeTooltip:n,delayDuration:t=ve,skipDelayDuration:o=300,disableHoverableContent:r=!1,children:c}=e,l=a.useRef(!0),m=a.useRef(!1),s=a.useRef(0);return a.useEffect(()=>{const i=s.current;return()=>window.clearTimeout(i)},[]),f.jsx(he,{scope:n,isOpenDelayedRef:l,delayDuration:t,onOpen:a.useCallback(()=>{window.clearTimeout(s.current),l.current=!1},[]),onClose:a.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(()=>l.current=!0,o)},[o]),isPointerInTransitRef:m,onPointerInTransitChange:a.useCallback(i=>{m.current=i},[]),disableHoverableContent:r,children:c})};q.displayName=W;var P="Tooltip",[ge,_]=A(P),G=e=>{const{__scopeTooltip:n,children:t,open:o,defaultOpen:r,onOpenChange:c,disableHoverableContent:l,delayDuration:m}=e,s=I(P,e.__scopeTooltip),i=O(n),[u,p]=a.useState(null),v=te(),d=a.useRef(0),h=l??s.disableHoverableContent,x=m??s.delayDuration,g=a.useRef(!1),[T,y]=ne({prop:o,defaultProp:r??!1,onChange:H=>{H?(s.onOpen(),document.dispatchEvent(new CustomEvent(M))):s.onClose(),c==null||c(H)},caller:P}),C=a.useMemo(()=>T?g.current?"delayed-open":"instant-open":"closed",[T]),N=a.useCallback(()=>{window.clearTimeout(d.current),d.current=0,g.current=!1,y(!0)},[y]),E=a.useCallback(()=>{window.clearTimeout(d.current),d.current=0,y(!1)},[y]),S=a.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>{g.current=!0,y(!0),d.current=0},x)},[x,y]);return a.useEffect(()=>()=>{d.current&&(window.clearTimeout(d.current),d.current=0)},[]),f.jsx(oe,{...i,children:f.jsx(ge,{scope:n,contentId:v,open:T,stateAttribute:C,trigger:u,onTriggerChange:p,onTriggerEnter:a.useCallback(()=>{s.isOpenDelayedRef.current?S():N()},[s.isOpenDelayedRef,S,N]),onTriggerLeave:a.useCallback(()=>{h?E():(window.clearTimeout(d.current),d.current=0)},[E,h]),onOpen:N,onClose:E,disableHoverableContent:h,children:t})})};G.displayName=P;var j="TooltipTrigger",z=a.forwardRef((e,n)=>{const{__scopeTooltip:t,...o}=e,r=_(j,t),c=I(j,t),l=O(t),m=a.useRef(null),s=L(n,m,r.onTriggerChange),i=a.useRef(!1),u=a.useRef(!1),p=a.useCallback(()=>i.current=!1,[]);return a.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),f.jsx(re,{asChild:!0,...l,children:f.jsx(se.button,{"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute,...o,ref:s,onPointerMove:b(e.onPointerMove,v=>{v.pointerType!=="touch"&&!u.current&&!c.isPointerInTransitRef.current&&(r.onTriggerEnter(),u.current=!0)}),onPointerLeave:b(e.onPointerLeave,()=>{r.onTriggerLeave(),u.current=!1}),onPointerDown:b(e.onPointerDown,()=>{r.open&&r.onClose(),i.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:b(e.onFocus,()=>{i.current||r.onOpen()}),onBlur:b(e.onBlur,r.onClose),onClick:b(e.onClick,r.onClose)})})});z.displayName=j;var xe="TooltipPortal",[Fe,ye]=A(xe,{forceMount:void 0}),w="TooltipContent",$=a.forwardRef((e,n)=>{const t=ye(w,e.__scopeTooltip),{forceMount:o=t.forceMount,side:r="top",...c}=e,l=_(w,e.__scopeTooltip);return f.jsx(F,{present:o||l.open,children:l.disableHoverableContent?f.jsx(Y,{side:r,...c,ref:n}):f.jsx(Te,{side:r,...c,ref:n})})}),Te=a.forwardRef((e,n)=>{const t=_(w,e.__scopeTooltip),o=I(w,e.__scopeTooltip),r=a.useRef(null),c=L(n,r),[l,m]=a.useState(null),{trigger:s,onClose:i}=t,u=r.current,{onPointerInTransitChange:p}=o,v=a.useCallback(()=>{m(null),p(!1)},[p]),d=a.useCallback((h,x)=>{const g=h.currentTarget,T={x:h.clientX,y:h.clientY},y=Ee(T,g.getBoundingClientRect()),C=Pe(T,y),N=Re(x.getBoundingClientRect()),E=Oe([...C,...N]);m(E),p(!0)},[p]);return a.useEffect(()=>()=>v(),[v]),a.useEffect(()=>{if(s&&u){const h=g=>d(g,u),x=g=>d(g,s);return s.addEventListener("pointerleave",h),u.addEventListener("pointerleave",x),()=>{s.removeEventListener("pointerleave",h),u.removeEventListener("pointerleave",x)}}},[s,u,d,v]),a.useEffect(()=>{if(l){const h=x=>{const g=x.target,T={x:x.clientX,y:x.clientY},y=(s==null?void 0:s.contains(g))||(u==null?void 0:u.contains(g)),C=!Ae(T,l);y?v():C&&(v(),i())};return document.addEventListener("pointermove",h),()=>document.removeEventListener("pointermove",h)}},[s,u,l,i,v]),f.jsx(Y,{...e,ref:c})}),[be,we]=A(P,{isInside:!1}),Ce=ce("TooltipContent"),Y=a.forwardRef((e,n)=>{const{__scopeTooltip:t,children:o,"aria-label":r,onEscapeKeyDown:c,onPointerDownOutside:l,...m}=e,s=_(w,t),i=O(t),{onClose:u}=s;return a.useEffect(()=>(document.addEventListener(M,u),()=>document.removeEventListener(M,u)),[u]),a.useEffect(()=>{if(s.trigger){const p=v=>{const d=v.target;d!=null&&d.contains(s.trigger)&&u()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[s.trigger,u]),f.jsx(ae,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:c,onPointerDownOutside:l,onFocusOutside:p=>p.preventDefault(),onDismiss:u,children:f.jsxs(ie,{"data-state":s.stateAttribute,...i,...m,ref:n,style:{...m.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[f.jsx(Ce,{children:o}),f.jsx(be,{scope:t,isInside:!0,children:f.jsx(le,{id:s.contentId,role:"tooltip",children:r||o})})]})})});$.displayName=w;var X="TooltipArrow",Ne=a.forwardRef((e,n)=>{const{__scopeTooltip:t,...o}=e,r=O(t);return we(X,t).isInside?null:f.jsx(ue,{...r,...o,ref:n})});Ne.displayName=X;function Ee(e,n){const t=Math.abs(n.top-e.y),o=Math.abs(n.bottom-e.y),r=Math.abs(n.right-e.x),c=Math.abs(n.left-e.x);switch(Math.min(t,o,r,c)){case c:return"left";case r:return"right";case t:return"top";case o:return"bottom";default:throw new Error("unreachable")}}function Pe(e,n,t=5){const o=[];switch(n){case"top":o.push({x:e.x-t,y:e.y+t},{x:e.x+t,y:e.y+t});break;case"bottom":o.push({x:e.x-t,y:e.y-t},{x:e.x+t,y:e.y-t});break;case"left":o.push({x:e.x+t,y:e.y-t},{x:e.x+t,y:e.y+t});break;case"right":o.push({x:e.x-t,y:e.y-t},{x:e.x-t,y:e.y+t});break}return o}function Re(e){const{top:n,right:t,bottom:o,left:r}=e;return[{x:r,y:n},{x:t,y:n},{x:t,y:o},{x:r,y:o}]}function Ae(e,n){const{x:t,y:o}=e;let r=!1;for(let c=0,l=n.length-1;c<n.length;l=c++){const m=n[c],s=n[l],i=m.x,u=m.y,p=s.x,v=s.y;u>o!=v>o&&t<(p-i)*(o-u)/(v-u)+i&&(r=!r)}return r}function Oe(e){const n=e.slice();return n.sort((t,o)=>t.x<o.x?-1:t.x>o.x?1:t.y<o.y?-1:t.y>o.y?1:0),_e(n)}function _e(e){if(e.length<=1)return e.slice();const n=[];for(let o=0;o<e.length;o++){const r=e[o];for(;n.length>=2;){const c=n[n.length-1],l=n[n.length-2];if((c.x-l.x)*(r.y-l.y)>=(c.y-l.y)*(r.x-l.x))n.pop();else break}n.push(r)}n.pop();const t=[];for(let o=e.length-1;o>=0;o--){const r=e[o];for(;t.length>=2;){const c=t[t.length-1],l=t[t.length-2];if((c.x-l.x)*(r.y-l.y)>=(c.y-l.y)*(r.x-l.x))t.pop();else break}t.push(r)}return t.pop(),n.length===1&&t.length===1&&n[0].x===t[0].x&&n[0].y===t[0].y?n:n.concat(t)}var Me=q,je=G,Le=z,K=$;const De=Me,Ie=je,ke=Le,k=a.forwardRef(({className:e,sideOffset:n=4,...t},o)=>f.jsx(K,{ref:o,sideOffset:n,className:D("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-sm text-primary-foreground duration-300 animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top data-[side=left]:slide-in-from-right data-[side=right]:slide-in-from-left data-[side=top]:slide-in-from-bottom",e),...t}));k.displayName=K.displayName;k.__docgenInfo={description:"",methods:[],props:{sideOffset:{defaultValue:{value:"4",computed:!1},required:!1}}};const J=de("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 cursor-pointer enabled:active:scale-95 transition-transform duration-75",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90 shadow-sm",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-sm",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground shadow-sm",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80 shadow-sm",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",withicon:"h-10 w-10","sm-icon":"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),Q=a.forwardRef(({className:e,variant:n,size:t,asChild:o=!1,...r},c)=>{const l=o?V:"button",m=t==="withicon"||t==="sm-icon",s=f.jsx(l,{className:D(J({variant:n,size:t,className:e})),ref:c,...r});if(m){const i=r;if(!("allowNoTooltip"in i&&i.allowNoTooltip)&&!i.tooltip)throw new Error(`图标按钮 (size="${t}") 必须提供 tooltip 属性`);return i.tooltip?f.jsx(De,{children:f.jsxs(Ie,{children:[f.jsx(ke,{asChild:!0,children:s}),f.jsx(k,{children:f.jsx("p",{children:i.tooltip})})]})}):s}return s});Q.displayName="Button";const Z=a.forwardRef(({className:e,variant:n,size:t,asChild:o=!1,loading:r=!1,loadingText:c,children:l,disabled:m,...s},i)=>{const u=o?V:"button",p=r||m;return f.jsxs(u,{className:D(J({variant:n,size:t,className:e})),disabled:p,ref:i,...s,children:[r&&f.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[f.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),f.jsx("path",{className:"opacity-75",d:"m4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",fill:"currentColor"})]}),r&&c||l]})});Z.displayName="ButtonWithLoading";Q.__docgenInfo={description:"",methods:[],displayName:"Button",props:{asChild:{defaultValue:{value:"false",computed:!1},required:!1}}};Z.__docgenInfo={description:"",methods:[],displayName:"ButtonWithLoading",props:{asChild:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},loading:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},loadingText:{required:!1,tsType:{name:"string"},description:""},size:{required:!1,tsType:{name:"union",raw:"'default' | 'sm' | 'lg'",elements:[{name:"literal",value:"'default'"},{name:"literal",value:"'sm'"},{name:"literal",value:"'lg'"}]},description:""}},composes:["VariantProps"]};export{Q as B,F as P,Ie as T,Z as a,De as b,ke as c,k as d,J as e};
