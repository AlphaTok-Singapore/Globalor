import{j as g}from"./jsx-runtime-CDt2p4po.js";import{r as p}from"./index-GiUgBvb1.js";import{c as _}from"./utils-z-I-gj-J.js";import{T as K}from"./tags-3RK0HEEA.js";const x=p.forwardRef(({className:C,value:n,onChange:c,placeholder:T="输入标签，支持空格、逗号、顿号分隔...",disabled:q=!1,maxTags:r,duplicateCheck:h=!0,onTagAdd:s,onTagRemove:d,...k},E)=>{const[m,f]=p.useState(""),[I,y]=p.useState(!1),w=p.useRef(null),V=e=>{const t=e.trim();if(!t||r&&n.length>=r||h&&n.includes(t))return;const a=[...n,t];c(a),s==null||s(t),f("")},S=e=>{const t=/[\s、，,]+/,a=e.split(t).filter(l=>l.trim()),i=[];let u=n.length;if(a.forEach(l=>{const o=l.trim();o&&(!r||u<r)&&(!h||!n.includes(o)&&!i.includes(o))&&(i.push(o),u++)}),i.length>0){const l=[...n,...i];c(l),i.forEach(o=>s==null?void 0:s(o))}f("")},b=e=>{const t=n[e],a=n.filter((i,u)=>u!==e);c(a),d==null||d(t,e)},j=e=>{I||(e.key===" "||e.key==="Enter"?(e.preventDefault(),V(m)):e.key==="Backspace"&&!m&&n.length>0&&b(n.length-1))},N=e=>{const t=e.target.value;/[、，,]/.test(t)?S(t):f(t)},v=()=>{y(!0)},D=()=>{y(!1)},R=()=>{var e;(e=w.current)==null||e.focus()};return g.jsxs("div",{ref:E,className:_("flex min-h-9 w-full flex-wrap gap-1 rounded-md border border-input bg-transparent px-3 py-1 text-sm transition-colors placeholder:text-muted-foreground focus-within:ring-1 focus-within:ring-ring disabled:cursor-not-allowed disabled:opacity-50 disabled:bg-muted",C),onClick:R,...k,children:[n.map((e,t)=>g.jsx(K,{variant:"default",removable:!0,onRemove:()=>b(t),className:"shrink-0",children:e},t)),g.jsx("input",{ref:w,type:"text",value:m,onChange:N,onKeyDown:j,onCompositionStart:v,onCompositionEnd:D,placeholder:n.length===0?T:"",disabled:q||(r?n.length>=r:!1),className:"flex-1 min-w-0 border-0 bg-transparent outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed"})]})});x.displayName="TagsInput";x.__docgenInfo={description:"",methods:[],displayName:"TagsInput",props:{value:{required:!0,tsType:{name:"Array",elements:[{name:"string"}],raw:"string[]"},description:""},onChange:{required:!0,tsType:{name:"signature",type:"function",raw:"(tags: string[]) => void",signature:{arguments:[{type:{name:"Array",elements:[{name:"string"}],raw:"string[]"},name:"tags"}],return:{name:"void"}}},description:""},placeholder:{required:!1,tsType:{name:"string"},description:"",defaultValue:{value:'"输入标签，支持空格、逗号、顿号分隔..."',computed:!1}},disabled:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}},maxTags:{required:!1,tsType:{name:"number"},description:""},duplicateCheck:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"true",computed:!1}},onTagAdd:{required:!1,tsType:{name:"signature",type:"function",raw:"(tag: string) => void",signature:{arguments:[{type:{name:"string"},name:"tag"}],return:{name:"void"}}},description:""},onTagRemove:{required:!1,tsType:{name:"signature",type:"function",raw:"(tag: string, index: number) => void",signature:{arguments:[{type:{name:"string"},name:"tag"},{type:{name:"number"},name:"index"}],return:{name:"void"}}},description:""}},composes:["Omit"]};export{x as T};
